<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Medical Assistant - Smart Health Recommendations</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #0f9b8e 0%, #1e3c72 100%);
            --secondary-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --success-gradient: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --shadow: 0 20px 40px rgba(0,0,0,0.1);
            --shadow-hover: 0 25px 50px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
        }

        .header h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #f0f8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 5px rgba(255,255,255,0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(255,255,255,0.6)); }
        }

        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            font-weight: 300;
        }

        .main-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 50px;
            box-shadow: var(--shadow);
            border: 1px solid var(--glass-border);
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 4s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .doctor-section {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 50px;
            gap: 40px;
            position: relative;
            z-index: 2;
        }

        .doctor-image {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: var(--success-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 70px;
            color: white;
            box-shadow: 0 15px 35px rgba(79, 172, 254, 0.4);
            position: relative;
            animation: doctorFloat 3s ease-in-out infinite;
            transition: transform 0.3s ease;
        }

        .doctor-image:hover {
            transform: scale(1.05);
        }

        @keyframes doctorFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .doctor-image::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            background: linear-gradient(45deg, #fff, #4facfe, #00f2fe, #fff);
            z-index: -1;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .doctor-info {
            max-width: 500px;
        }

        .doctor-info h2 {
            font-size: 2.5rem;
            color: white;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .doctor-info p {
            color: rgba(255,255,255,0.9);
            font-size: 1.2rem;
            line-height: 1.6;
            font-weight: 300;
        }

        .input-section {
            position: relative;
            z-index: 2;
            margin-bottom: 40px;
        }

        .input-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 15px;
            color: white;
            font-size: 1.2rem;
        }

        .input-wrapper {
            position: relative;
        }

        .symptoms-input {
            width: 100%;
            padding: 20px 25px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 16px;
            font-size: 1.1rem;
            background: rgba(255,255,255,0.1);
            color: white;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 120px;
        }

        .symptoms-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .symptoms-input:focus {
            outline: none;
            border-color: rgba(255,255,255,0.5);
            background: rgba(255,255,255,0.15);
            box-shadow: 0 0 0 3px rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .input-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.6);
            font-size: 1.2rem;
        }

        .quick-symptoms {
            margin: 25px 0;
        }

        .quick-symptoms h3 {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .symptom-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .symptom-tag {
            background: rgba(255,255,255,0.15);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.95rem;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .symptom-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .symptom-tag:hover::before {
            left: 100%;
        }

        .symptom-tag:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255,255,255,0.15);
        }

        .symptom-tag.selected {
            background: var(--success-gradient);
            transform: scale(0.95);
        }

        .analyze-btn {
            width: 100%;
            background: var(--secondary-gradient);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin-top: 25px;
        }

        .analyze-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .analyze-btn:hover::before {
            left: 100%;
        }

        .analyze-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
            color: white;
        }

        .loading.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            margin-top: 40px;
            display: none;
            position: relative;
            z-index: 2;
        }

        .results.active {
            display: block;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .disease-name {
            font-size: 2rem;
            font-weight: 700;
            color: #e74c3c;
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.2);
            backdrop-filter: blur(10px);
        }

        .gemini-result {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            color: var(--text-primary);
            line-height: 1.7;
        }

        .gemini-result h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .result-card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .result-card h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .result-card .icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .result-card ul {
            list-style: none;
            padding: 0;
        }

        .result-card li {
            padding: 8px 0;
            color: var(--text-secondary);
            position: relative;
            padding-left: 25px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .result-card li:last-child {
            border-bottom: none;
        }

        .result-card li:before {
            content: "‚úì";
            color: #27ae60;
            font-weight: bold;
            position: absolute;
            left: 0;
            top: 8px;
        }

        .error-message {
            background: linear-gradient(135deg, #fee, #fecaca);
            border: 2px solid #f87171;
            color: #dc2626;
            padding: 20px;
            border-radius: 16px;
            margin-top: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .disclaimer {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-top: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .disclaimer h4 {
            margin-bottom: 15px;
            color: #f39c12;
            font-size: 1.2rem;
        }

        .char-count {
            position: absolute;
            bottom: -25px;
            right: 0;
            color: rgba(255,255,255,0.6);
            font-size: 0.85rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .main-card {
                padding: 30px 20px;
                border-radius: 24px;
            }

            .doctor-section {
                flex-direction: column;
                text-align: center;
                gap: 25px;
            }

            .doctor-image {
                width: 140px;
                height: 140px;
                font-size: 60px;
            }

            .doctor-info h2 {
                font-size: 2rem;
            }

            .result-grid {
                grid-template-columns: 1fr;
            }

            .symptom-tags {
                gap: 8px;
            }

            .symptom-tag {
                font-size: 0.9rem;
                padding: 10px 16px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 2.2rem;
            }

            .doctor-info p {
                font-size: 1rem;
            }

            .symptoms-input {
                padding: 16px 20px;
                font-size: 1rem;
            }

            .analyze-btn {
                padding: 16px 30px;
                font-size: 1.1rem;
            }

            .history-icon {
                top: 10px;
                right: 10px;
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }

        .history-icon {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 55px;
            height: 55px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            text-decoration: none;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .history-icon:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <a href="/history" class="history-icon" title="View History">
        <i class="fas fa-history"></i>
    </a>
    <div class="container">
        <div class="header">
            <h1>üíä HealthCare AI</h1>
            <p class="subtitle">Advanced AI-Powered Health Analysis & Personalized Medical Recommendations</p>
        </div>

        <div class="main-card">
            <div class="doctor-section">
                <div class="doctor-image">
                    üë®‚Äç‚öïÔ∏è
                </div>
                <div class="doctor-info">
                    <h2>Dr. AI Health Advisor</h2>
                    <p>Your trusted virtual health companion. Our advanced AI analyzes your symptoms using comprehensive medical knowledge to provide accurate disease predictions, diet plans, medications, and wellness recommendations.</p>
                </div>
            </div>

            <div class="input-section">
                <label for="symptoms">
                    <i class="fas fa-stethoscope"></i> Tell me about your symptoms:
                </label>
                <div class="input-wrapper">
                    <textarea 
                        id="symptoms" 
                        class="symptoms-input" 
                        placeholder="Describe your symptoms in detail... (e.g., fever for 3 days, severe headache, nausea, body aches)"
                        rows="4"
                        maxlength="500"
                    ></textarea>
                    <div class="input-icon">
                        <i class="fas fa-edit"></i>
                    </div>
                    <div class="char-count" id="charCount">0/500</div>
                </div>
                
                <div class="quick-symptoms">
                    <h3><i class="fas fa-tags"></i> Quick Select Common Symptoms:</h3>
                    <div class="symptom-tags">
                        <button class="symptom-tag" onclick="addSymptom('fever')">üå°Ô∏è Fever</button>
                        <button class="symptom-tag" onclick="addSymptom('headache')">ü§ï Headache</button>
                        <button class="symptom-tag" onclick="addSymptom('cough')">üò∑ Cough</button>
                        <button class="symptom-tag" onclick="addSymptom('nausea')">ü§¢ Nausea</button>
                        <button class="symptom-tag" onclick="addSymptom('fatigue')">üò¥ Fatigue</button>
                        <button class="symptom-tag" onclick="addSymptom('joint_pain')">ü¶¥ Joint Pain</button>
                        <button class="symptom-tag" onclick="addSymptom('skin_rash')">üî¥ Skin Rash</button>
                        <button class="symptom-tag" onclick="addSymptom('stomach_pain')">üî∏ Stomach Pain</button>
                        <button class="symptom-tag" onclick="addSymptom('dizziness')">üåÄ Dizziness</button>
                        <button class="symptom-tag" onclick="addSymptom('chest_pain')">üíì Chest Pain</button>
                        <button class="symptom-tag" onclick="addSymptom('shortness_of_breath')">üí® Breathing Issues</button>
                        <button class="symptom-tag" onclick="addSymptom('sore_throat')">üé≠ Sore Throat</button>
                    </div>
                </div>

                <button class="analyze-btn" onclick="analyzeSymptoms()" id="analyzeBtn">
                    <i class="fas fa-search"></i> Analyze My Symptoms & Get AI Recommendations
                </button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p><i class="fas fa-brain"></i> AI is analyzing your symptoms...</p>
                <small>This may take a few moments for the most accurate results</small>
            </div>

            <div class="results" id="results">
                <!-- Results will be displayed here -->
            </div>

            <div class="disclaimer">
                <h4><i class="fas fa-exclamation-triangle"></i> Important Medical Disclaimer</h4>
                <p>This AI system provides educational information and should never replace professional medical advice, diagnosis, or treatment. Always consult qualified healthcare providers for medical concerns. In emergencies, contact your local emergency services immediately.</p>
            </div>
        </div>
    </div>

    <script>
        // Character counter for textarea
document.getElementById('symptoms').addEventListener('input', function() {
    const charCount = this.value.length;
    document.getElementById('charCount').textContent = `${charCount}/500`;
    
    if (charCount > 450) {
        document.getElementById('charCount').style.color = '#f39c12';
    } else {
        document.getElementById('charCount').style.color = 'rgba(255,255,255,0.6)';
    }
});

function addSymptom(symptom) {
    const input = document.getElementById('symptoms');
    const currentValue = input.value.trim();
    const button = event.target;
    
    // Toggle selection visual
    button.classList.toggle('selected');
    
    if (currentValue === '') {
        input.value = symptom;
    } else if (!currentValue.toLowerCase().includes(symptom.toLowerCase())) {
        input.value = currentValue + ', ' + symptom;
    }
    
    // Update character count
    input.dispatchEvent(new Event('input'));
    
    // Add a little animation
    button.style.transform = 'scale(0.95)';
    setTimeout(() => {
        button.style.transform = '';
    }, 150);
}

function showLoading() {
    document.getElementById('loading').classList.add('active');
    document.getElementById('results').classList.remove('active');
    document.getElementById('analyzeBtn').disabled = true;
    document.getElementById('analyzeBtn').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
}

function hideLoading() {
    document.getElementById('loading').classList.remove('active');
    document.getElementById('analyzeBtn').disabled = false;
    document.getElementById('analyzeBtn').innerHTML = '<i class="fas fa-search"></i> Analyze My Symptoms & Get AI Recommendations';
}

function displayModelResults(data) {
    const resultsDiv = document.getElementById('results');
    
    resultsDiv.innerHTML = `
        <div class="disease-name">
            <i class="fas fa-diagnoses"></i> Predicted Condition: ${data.disease}
        </div>
        
        <div class="result-card">
            <h3>
                <div class="icon"><i class="fas fa-info-circle"></i></div>
                Medical Description
            </h3>
            <p>${data.description}</p>
        </div>

        <div class="result-grid">
            <div class="result-card">
                <h3>
                    <div class="icon"><i class="fas fa-shield-alt"></i></div>
                    Precautions
                </h3>
                <ul>
                    ${data.precautions.map(p => `<li>${p}</li>`).join('')}
                </ul>
            </div>

            <div class="result-card">
                <h3>
                    <div class="icon"><i class="fas fa-pills"></i></div>
                    Medications
                </h3>
                <ul>
                    ${data.medications.map(m => `<li>${m}</li>`).join('')}
                </ul>
            </div>

            <div class="result-card">
                <h3>
                    <div class="icon"><i class="fas fa-apple-alt"></i></div>
                    Dietary Recommendations
                </h3>
                <ul>
                    ${data.diets.map(d => `<li>${d}</li>`).join('')}
                </ul>
            </div>

            <div class="result-card">
                <h3>
                    <div class="icon"><i class="fas fa-running"></i></div>
                    Exercise & Lifestyle
                </h3>
                <ul>
                    ${data.workouts.map(w => `<li>${w}</li>`).join('')}
                </ul>
            </div>
        </div>
    `;
    
    resultsDiv.classList.add('active');
}

function displayGeminiResults(data) {
    const resultsDiv = document.getElementById('results');
    
    // Format the Gemini response text
    let formattedText = data.result.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    formattedText = formattedText.replace(/\*(.*?)\*/g, '<em>$1</em>');
    formattedText = formattedText.replace(/\n\n/g, '</p><p>');
    formattedText = formattedText.replace(/\n/g, '<br>');
    
    resultsDiv.innerHTML = `
        <div class="disease-name">
            <i class="fas fa-robot"></i> AI Health Analysis Results
        </div>
        
        <div class="gemini-result">
            <h3><i class="fas fa-brain"></i> Comprehensive Health Analysis</h3>
            <div class="content">
                <p>${formattedText}</p>
            </div>
        </div>
        
        <div class="result-card" style="margin-top: 20px; text-align: center; background: linear-gradient(135deg, #e3f2fd, #bbdefb);">
            <h3 style="color: #1976d2;"><i class="fas fa-lightbulb"></i> Powered by Google Gemini AI</h3>
            <p style="color: #424242; margin: 0;">Advanced AI analysis based on your symptoms: <strong>${data.input_symptoms.join(', ')}</strong></p>
        </div>
    `;
    
    resultsDiv.classList.add('active');
}

function displayError(message) {
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = `
        <div class="error-message">
            <h3><i class="fas fa-exclamation-triangle"></i> Analysis Error</h3>
            <p>${message}</p>
            <small>Please try rephrasing your symptoms or contact a healthcare professional.</small>
        </div>
    `;
    resultsDiv.classList.add('active');
}

async function analyzeSymptoms() {
    const symptomsInput = document.getElementById('symptoms');
    const symptoms = symptomsInput.value.trim();
    
    if (!symptoms) {
        alert('‚ö†Ô∏è Please describe your symptoms before analyzing.');
        symptomsInput.focus();
        return;
    }

    if (symptoms.length < 5) {
        alert('‚ö†Ô∏è Please provide more detailed symptoms for better analysis.');
        symptomsInput.focus();
        return;
    }

    showLoading();
    
    try {
        // Updated to use fetch instead of axios for better compatibility
        const response = await fetch('http://127.0.0.1:5000/predict', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ symptoms: symptoms })
        });

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();

        if (data.error) {
            displayError(data.error);
        } else if (data.source === 'model') {
            // Display ML model results
            displayModelResults(data);
        } else if (data.source === 'gemini') {
            // Display Gemini AI results
            displayGeminiResults(data);
        } else {
            displayError('Unexpected response format. Please try again.');
        }
        
    } catch (error) {
        console.error('Analysis error:', error);
        
        if (error.name === 'TypeError' && error.message.includes('fetch')) {
            displayError('Unable to connect to the server. Please make sure the backend is running on http://127.0.0.1:5000');
        } else {
            displayError(`Connection error: ${error.message}. Please check if your backend server is running.`);
        }
    } finally {
        hideLoading();
    }
}

// Add event listener when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Add Enter key support for the textarea
    const symptomsTextarea = document.getElementById('symptoms');
    if (symptomsTextarea) {
        symptomsTextarea.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 'Enter') {
                analyzeSymptoms();
            }
        });
    }
});
    </script>
</body>

</html>
